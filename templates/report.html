<!DOCTYPE html>
<html>
<head>
    <title>Report</title>
</head>
<body>

    <h2>Generate Report</h2>

    <form action="/report" method="POST">
        Start Date: <input type="date" name="start_date" required value="{{ request.form['start_date'] }}">
        End Date: <input type="date" name="end_date" required value="{{ request.form['end_date'] }}">
        
        Importer: 
        <select name="importer">
            <option value="All">All</option>
            {% for imp in unique_importers %}
                <option value="{{ imp }}" {% if imp == request.form.get('importer') %}selected{% endif %}>
                {{ imp }}
                </option>
            {% endfor %}
        </select>

        <input type="submit" value="View Online">
    </form>
    <a href="/download_csv" style="margin-top: 10px; display: inline-block; padding: 6px 12px; background-color: #007BFF; color: white; text-decoration: none; border-radius: 4px;">Download as CSV</a>

    <h2>Sales Report</h2>
    
    {% if report %}
    <form method="post" action="{{ url_for('show_report') }}">
        <table border="1">
            <thead>
                <tr>
                    <th>Manufacturer SKU</th>
                    <th>Product Name</th>
                    <th>Color</th>
                    <th>Size</th>
                    <th>Manufacturer</th>
                    <th>Sold Quantity</th>
                    <th>Inventory</th>
                    <th>Quantity to Order</th> <!-- New Column -->
                </tr>
            </thead>
            <tbody>
                {% for record in report %}
                    <tr>
                        <td>{{ record.manufacturer_sku }}</td>
                        <td>{{ record.product_name }}</td>
                        <td>{{ record.color }}</td>
                        <td>{{ record.size }}</td>
                        <td>{{ record.manufacturer }}</td>
                        <td>{{ record['sold quantity'] }}</td>
                        <td>{{ record.Inventory }}</td>
                        <td><input type="number" name="quantity_to_order" placeholder="Enter quantity"></td> <!-- New Input Field -->
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <button type="submit" style="margin-top: 10px; display: inline-block; padding: 6px 12px; background-color: #007BFF; color: white; text-decoration: none; border-radius: 4px;">Save Quantities</button> <!-- New Button -->
    </form>
    {% endif %}
</body>
</html>
